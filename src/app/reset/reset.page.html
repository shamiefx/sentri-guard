<ion-content class="auth-content ion-padding" fullscreen>
  <div class="brand">
    <h1>Password Reset</h1>
    <p class="tagline">Send a reset link to your email</p>
  </div>
  <div class="auth-card" [class.blur]="loading()">
    <form [formGroup]="form" (ngSubmit)="submit()" novalidate>
      <div class="field" [class.is-invalid]="f.email.touched && f.email.invalid">
        <ion-label>Email</ion-label>
        <ion-input type="email" formControlName="email" autocomplete="off" autocapitalize="off" autocorrect="off" spellcheck="false" placeholder="you@company.com"></ion-input>
        <ion-note color="danger" *ngIf="f.email.touched && f.email.invalid">Valid email required</ion-note>
      </div>
      <div class="status" *ngIf="sent()">
        <ion-note color="success">If the email exists, a link was sent.</ion-note>
      </div>
      <div class="actions">
        <ion-button type="submit" expand="block" [disabled]="loading() || form.invalid">
          <ng-container *ngIf="!loading(); else loadBtn">Send Reset Link</ng-container>
        </ion-button>
        <ng-template #loadBtn><ion-spinner name="crescent"></ion-spinner></ng-template>
        <button type="button" class="link-btn" (click)="backToLogin()">Back to login</button>
      </div>
    </form>
  </div>
  <ion-toast [isOpen]="toastOpen()" (didDismiss)="toastOpen.set(false)" [message]="toastMsg()" duration="3000" position="bottom" color="primary" icon="mail-unread-outline"></ion-toast>
  @if (loading()) { <div class="scrim" aria-hidden="true"><ion-spinner name="crescent"></ion-spinner></div> }
</ion-content>
